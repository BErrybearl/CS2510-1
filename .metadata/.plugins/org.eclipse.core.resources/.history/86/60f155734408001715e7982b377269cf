// represents a list of Person's buddies
public class ConsLoBuddy implements ILoBuddy {

  Person first;
  ILoBuddy rest;

  ConsLoBuddy(Person first, ILoBuddy rest) {
    this.first = first;
    this.rest = rest;
  }

  public boolean hasDirectBuddy(Person that) {
    return first.username.equals(that.username) || rest.hasDirectBuddy(that);
  }

  public int countCommonBuddies(ILoBuddy that) {
    return that.countCommonBuddiesHelper(this);
  }

  public int countCommonBuddiesHelper(ILoBuddy that) {
    if (that.hasDirectBuddy(this.first)) {
      return 1 + this.rest.countCommonBuddies(that);
    }
    else {
      return this.rest.countCommonBuddies(that);
    }
  }

  public boolean indrectInv(Person that) {
    return this.first.hasDirectBuddy(that) || this.rest.indrectInv(that);
  }

  public int countHelper(ILoBuddy that) {
    if (that.hasDirectBuddy(this.first)) {
      return this.rest.countHelper(that);
    }
    else {

      that = new ConsLoBuddy(this.first, that);

      return 1 + this.rest.countHelper(that) 
               + this.first.buddies.countHelper(that)
               - this.countCommonBuddies(that);
    }
  }

}
